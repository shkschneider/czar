/*
 * Test defer functionality
 * Tests: #defer keyword with cleanup attribute
 */

#include <stdlib.h>
#include <stdio.h>

int main(void) {
    /* Test 1: Simple defer with malloc/free */
    mut void *p = malloc(100) #defer { free(p); };
    printf("Allocated: %p\n", p);
    printf("After defer\n");
    
    return 0;
}
