// Test interaction between explicit free and scope-based cleanup

struct Item {
    i32 id
}

fn main() -> i32 {
    Item i1 = new Item { id: 1 }
    Item i2 = new Item { id: 2 }
    Item i3 = new Item { id: 3 }
    
    mut i32 result = i1.id + i2.id + i3.id
    
    // Explicitly free i2
    free i2
    
    // At scope exit: only i1 and i3 should be freed
    // i2 should NOT be freed again (double-free prevention)
    return result
}
// Expected: 1 + 2 + 3 = 6
