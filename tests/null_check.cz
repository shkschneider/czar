// Test null check operator !!

struct Point {
    x: i32
    y: i32
}

fn get_null() -> *Point {
    return null
}

fn get_point() -> *Point {
    var p: Point = Point { x: 10, y: 20 }
    return &p
}

fn main() -> i32 {
    // Test 1: Using !! on non-null should work
    var p1: Point = Point { x: 5, y: 10 }
    var ptr1: *Point = &p1
    val checked: *Point = ptr1!!
    
    // Test 2: Chaining ?. with ??
    var p2: *Point = null
    val default_val: i32 = p2?.x ?? 42
    
    // Test 3: Non-null pointer with ?.
    var p3: Point = Point { x: 7, y: 14 }
    var ptr3: *Point = &p3
    val safe_x: i32 = ptr3?.x ?? 0
    
    // Return sum for testing
    return default_val + safe_x  // 42 + 7 = 49
}
