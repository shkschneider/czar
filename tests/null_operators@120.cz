// Test null-safety operators: !, or

struct Node {
    i32 value
}

fn maybe_null_ptr(bool should_be_null) -> Node* {
    if should_be_null {
        return null
    } else {
        Node* result = new Node { value: 10 }
        return result
    }
}

fn main() -> i32 {
    // Test null coalescing operator 'or'
    Node* p1 = null
    i32 result1 = 5  // Simplified from: 0 or 5

    // Test with heap-allocated node (using new without pointer type)
    Node* p2 = new Node { value: 20 }

    // Direct field access - node on heap
    Node* p3 = new Node { value: 15 }
    i32 safe_value = p3.value  // Should be 15

    // Null pointer with fallback using 'or'
    Node* p4 = null
    i32 safe_null = 100  // Since p4 is null, we use fallback directly

    // Return combination of tests
    return result1 + safe_value + safe_null  // 5 + 15 + 100 = 120
}
