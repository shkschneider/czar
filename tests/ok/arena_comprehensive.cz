// Test #unsafe blocks in methods with multiple calls

struct TestStruct {
    i32 x
    i32 y
}

fn TestStruct:init() void {
    #unsafe {
        self->x = 10;
        self->y = 20;
    }
}

fn TestStruct:compute() i32 {
    mut i32 result = 0
    #unsafe {
        result = self->x + self->y;
    }
    return result
}

fn main() i32 {
    TestStruct t = new TestStruct
    #defer free t

    i32 val = t:compute()

    return 0
}
