// Test basic defer functionality

struct Person {
    i32 age
}

fn main() i32 {
    // Heap allocation with defer free
    Person? p = new Person { age: 25 }
    defer free(p)
    
    // Use the person
    i32 result = p.age
    
    // No explicit free needed - defer will handle it at scope exit
    return result - 25
}
