// Test multiple structs implementing the same interface with fields

iface iShape {
    i32 width
    i32 height
}

struct Rectangle : iShape {
    i32 width
    i32 height
}

fn Rectangle:rect_area() i32 {
    return self.width * self.height
}

fn Rectangle:rect_perimeter() i32 {
    return 2 * (self.width + self.height)
}

struct Square : iShape {
    i32 width   // reuse as side
    i32 height  // reuse as side
}

fn Square:square_area() i32 {
    return self.width * self.width
}

fn Square:square_perimeter() i32 {
    return 4 * self.width
}

fn main() i32 {
    Rectangle rect = Rectangle { width: 10, height: 5 }
    Square sq = Square { width: 6, height: 6 }
    
    // Test Rectangle implementation
    if rect:rect_area() != 50 {
        return 1
    }
    
    if rect:rect_perimeter() != 30 {
        return 2
    }
    
    // Test Square implementation (6x6 = 36)
    if sq:square_area() != 36 {
        return 3
    }
    
    if sq:square_perimeter() != 24 {
        return 4
    }
    
    // Test polymorphism
    if not (rect is iShape) {
        return 5
    }
    
    if not (sq is iShape) {
        return 6
    }
    
    return 0
}
