// Test #DEBUG() function calls - comprehensive
// Verifies that #DEBUG can be used as expression and function call

fn test_debug_read() i32 {
    // All these should read the same value
    bool a = #DEBUG
    bool b = #DEBUG()
    
    if a != b {
        return 1
    }
    
    return 0
}

fn test_debug_set() i32 {
    // Set to true and verify
    mut bool result = #DEBUG(true)
    if not result {
        return 1
    }
    
    // Verify it persists
    if not #DEBUG() {
        return 2
    }
    
    // Set to false and verify  
    result = #DEBUG(false)
    if result {
        return 3
    }
    
    // Verify it persists
    if #DEBUG {
        return 4
    }
    
    return 0
}

fn test_debug_in_condition() i32 {
    // Set to true
    _ = #DEBUG(true)
    
    // Use in condition
    if #DEBUG {
        // Set to false inside
        _ = #DEBUG(false)
    } else {
        return 1
    }
    
    // Verify it was set to false
    if #DEBUG() {
        return 2
    }
    
    return 0
}

fn main() i32 {
    mut i32 r = test_debug_read()
    if r != 0 {
        return r
    }
    
    r = test_debug_set()
    if r != 0 {
        return 10 + r
    }
    
    r = test_debug_in_condition()
    if r != 0 {
        return 20 + r
    }
    
    return 0
}
