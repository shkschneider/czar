// Comprehensive example demonstrating the module system
// Uses 'main' module which is allowed as entry point in any directory
module main

// This import is unused and will trigger a warning
#import cz.math

// Import with custom alias (also unused, will warn)
#import cz.io as myio

// Public struct - can be used from other modules
pub struct Point {
    i32 x
    i32 y
}

// Public struct with more fields
pub struct Rectangle {
    Point top_left
    i32 width
    i32 height
}

// Private struct - only visible within this module
struct InternalBuffer {
    i32 size
    i32 capacity
}

// Main function first - demonstrates forward declarations work
fn main() i32 {
    // Create a point using public function (defined later)
    Point p1 = create_point(0, 0)
    Point p2 = create_point(100, 50)
    
    // Create a rectangle
    Rectangle rect = Rectangle {
        top_left: p1,
        width: 100,
        height: 50
    }
    
    // Calculate area using public function (defined later)
    i32 area = calculate_area(rect)
    
    // Use private function (defined later)
    i32 result = internal_computation()
    
    // Verify calculations: area=5000, result=10, so 5000 - 5000 + result - 10 = 0
    return area - 5000 + result - 10
}

// Public function using private helper (defined later)
pub fn calculate_area(Rectangle rect) i32 {
    // Call private helper function defined below
    i32 width = get_width(rect)
    i32 height = rect.height
    return width * height
}

// Public function to create a Point
pub fn create_point(i32 x, i32 y) Point {
    Point p = Point { x: x, y: y }
    return p
}

// Private function with internal logic
fn internal_computation() i32 {
    InternalBuffer buf = InternalBuffer { size: 10, capacity: 20 }
    return buf.capacity - buf.size
}

// Private helper function - defined last but used earlier
fn get_width(Rectangle rect) i32 {
    return rect.width
}

