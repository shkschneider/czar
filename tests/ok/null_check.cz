// Test null check operator !!

struct Point {
    i32 x
    i32 y
}

fn get_null() Point? {
    return null
}

fn get_point() Point? {
    Point? p = new Point { x: 10, y: 20 }
    return p
}

fn main() i32 {
    // Test 1: Using !! on non-null should work
    Point? p1 = new Point { x: 5, y: 10 }
    Point? ptr1 = p1
    Point? checked = ptr1!!

    // Test 2: Null pointer with fallback using 'or'
    Point? p2 = null
    i32 default_val = 42  // Use fallback directly for null

    // Test 3: Non-null pointer with direct access
    Point? p3 = new Point { x: 7, y: 14 }
    Point? ptr3 = p3
    i32 safe_x = ptr3.x  // Direct access since ptr3 is not null

    // Return sum for testing
    return default_val + safe_x - 49 // 42 + 7 = 49
}
