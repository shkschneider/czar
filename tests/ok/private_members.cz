// Test that private fields and methods work correctly within the struct
struct SecretBox {
    i32 _secret
    i32 public_value
}

fn SecretBox:_calculate_secret() i32 {
    // Private method can access private field
    return self._secret * 3
}

fn SecretBox:get_result() i32 {
    // Public method can call private method and access private field
    i32 calculated = self:_calculate_secret()
    return calculated + self.public_value
}

fn SecretBox:update_secret(i32 new_val) void {
    // Private field can be modified from within methods
    self._secret = new_val
}

fn main() i32 {
    mut SecretBox box = SecretBox { _secret: 10, public_value: 5 }
    
    // Can call public methods
    i32 result1 = box:get_result()  // (10 * 3) + 5 = 35
    
    box:update_secret(20)
    i32 result2 = box:get_result()  // (20 * 3) + 5 = 65
    
    // Can access public field
    box.public_value = 10
    i32 result3 = box:get_result()  // (20 * 3) + 10 = 70
    
    // Check results
    if result1 == 35 {
        if result2 == 65 {
            if result3 == 70 {
                return 0
            }
        }
    }
    
    return 1
}
