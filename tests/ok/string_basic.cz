// Test basic String functionality
#import cz.fmt

fn main() i32 {
    // Test heap-allocated String (returns pointer)
    String? s1 = new String { "Hello, World!" }

    // Test stack-allocated String (value)
    String s2 = String { "Stack String" }

    // Access String fields
    i32 len1 = s1.length
    i32 cap1 = s1.capacity
    i32 len2 = s2.length
    i32 cap2 = s2.capacity

    // Get C-style string
    println(s1.cstr())
    println(s2.cstr())

    // Verify lengths
    if len1 != 13 {
        return 1
    }
    if len2 != 12 {
        return 2
    }

    // Verify capacities are reasonable
    if cap1 < len1 {
        return 3
    }
    if cap2 < len2 {
        return 4
    }

    free s1
    return 0
}
