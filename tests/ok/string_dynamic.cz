// Test string dynamic resizing and memory safety
#import cz.fmt

fn main() i32 {
    // Test heap-allocated string
    string? s = new string "Hello"

    // Access fields
    i32 initial_len = s.length
    i32 initial_cap = s.capacity

    // Verify initial state
    if initial_len != 5 {
        return 1
    }

    if initial_cap < initial_len {
        return 2
    }

    // Test C-string conversion
    fmt.print(s.cstr())

    free s
    return 0
}
