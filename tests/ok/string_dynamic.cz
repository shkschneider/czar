// Test String dynamic resizing and memory safety
#import cz.fmt.*

fn main() i32 {
    // Test heap-allocated string
    String? s = new String { "Hello" }

    // Access fields
    i32 initial_len = s.length
    i32 initial_cap = s.capacity

    // Verify initial state
    if initial_len != 5 {
        return 1
    }

    if initial_cap < initial_len {
        return 2
    }

    // Test C-String conversion
    print(s.cstr())

    free s
    return 0
}
