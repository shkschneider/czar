// Test when with variable declaration
struct Point {
    i32 x
    i32 y
}

fn test_when_var_decl() -> i32 {
    Point p = Point { x: 5, y: 10 }

    when (i32 val = p.x) {
        1 -> { return 1 };
        5 -> { return 0 };
        else -> { return 2 }
    }
}

fn main() -> i32 {
    return test_when_var_decl()
}
